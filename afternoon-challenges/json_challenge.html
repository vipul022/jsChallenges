<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // Weather Class
      // A JSON string has been provided for you in the data.js file:  you can access it in your code with the dataString Variable.

      // You should notice that this has been done by requiring the file rather than reading it with FileSystem.

      //  Fill in the Weather class with the following functionality.

      // Methods required
      // Constructor

      // The class Weather Should contain a data property in the constructor - If you are unsure, refer to: W3Schools  or Canvas
      // This property should contain the parsed JSON data that is stored in dataString.

      // If you are unsure how to access data within the object, try console logging a new Weathers data to the console,
      // this will help you to get familiar with the data, it's key/value pairs, and what is nested.

      // maxTemps  - returns an array containing the max_temp from consolidated_weather array.

      // averageTemp - returns a string with 2 decimal places. (It should be the average temperature of the week, use the the_temp data.)

      // forcast - This takes in a day with the format (yyyy-mm-dd) and returns a string.

      // The string should read:  The temperature was (the_temp) degrees with a high of (max) and a low of (min).  Each temperature should have at most 2 decimal places.

      // If no data is found return a string: No information for that day

      const data =
        '{"consolidated_weather":[{"id":5174557100998656,"weather_state_name":"Heavy Cloud","weather_state_abbr":"hc","wind_direction_compass":"WNW","created":"2020-05-26T03:16:02.709436Z","applicable_date":"2020-05-26","min_temp":14.129999999999999,"max_temp":24.875,"the_temp":24.270000000000003,"wind_speed":3.927585234165805,"wind_direction":292.3948850323286,"air_pressure":1036.0,"humidity":37,"visibility":11.75137198759246,"predictability":71},{"id":5314230309879808,"weather_state_name":"Heavy Cloud","weather_state_abbr":"hc","wind_direction_compass":"NE","created":"2020-05-26T03:16:02.415483Z","applicable_date":"2020-05-27","min_temp":13.165,"max_temp":22.995,"the_temp":22.79,"wind_speed":3.5242692449481687,"wind_direction":37.505614185377674,"air_pressure":1036.0,"humidity":48,"visibility":11.699487493040643,"predictability":71},{"id":4708020573437952,"weather_state_name":"Light Cloud","weather_state_abbr":"lc","wind_direction_compass":"E","created":"2020-05-26T03:16:02.713220Z","applicable_date":"2020-05-28","min_temp":11.495000000000001,"max_temp":21.07,"the_temp":20.015,"wind_speed":6.7263066329648185,"wind_direction":87.0006098385439,"air_pressure":1033.5,"humidity":42,"visibility":16.61080539648453,"predictability":70},{"id":5160618472505344,"weather_state_name":"Light Cloud","weather_state_abbr":"lc","wind_direction_compass":"E","created":"2020-05-26T03:16:02.712526Z","applicable_date":"2020-05-29","min_temp":11.635,"max_temp":21.495,"the_temp":20.31,"wind_speed":7.049414745780641,"wind_direction":89.00152669071973,"air_pressure":1027.5,"humidity":39,"visibility":16.636902986558496,"predictability":70},{"id":5498975509544960,"weather_state_name":"Light Cloud","weather_state_abbr":"lc","wind_direction_compass":"E","created":"2020-05-26T03:16:02.321940Z","applicable_date":"2020-05-30","min_temp":12.41,"max_temp":22.43,"the_temp":21.57,"wind_speed":6.952318147721307,"wind_direction":89.66717930710007,"air_pressure":1024.0,"humidity":43,"visibility":16.94354966992762,"predictability":70},{"id":4584181835235328,"weather_state_name":"Heavy Cloud","weather_state_abbr":"hc","wind_direction_compass":"E","created":"2020-05-26T03:16:04.331431Z","applicable_date":"2020-05-31","min_temp":13.280000000000001,"max_temp":22.619999999999997,"the_temp":21.56,"wind_speed":5.7741537421458675,"wind_direction":84.5,"air_pressure":1022.0,"humidity":45,"visibility":9.999726596675416,"predictability":71}],"time":"2020-05-26T05:45:05.134000+01:00","sun_rise":"2020-05-26T04:54:12.381907+01:00","sun_set":"2020-05-26T21:01:47.850181+01:00","timezone_name":"LMT","parent":{"title":"England","location_type":"Region / State / Province","woeid":24554868,"latt_long":"52.883560,-1.974060"},"sources":[{"title":"BBC","slug":"bbc","url":"http://www.bbc.co.uk/weather/","crawl_rate":360},{"title":"Forecast.io","slug":"forecast-io","url":"http://forecast.io/","crawl_rate":480},{"title":"HAMweather","slug":"hamweather","url":"http://www.hamweather.com/","crawl_rate":360},{"title":"Met Office","slug":"met-office","url":"http://www.metoffice.gov.uk/","crawl_rate":180},{"title":"OpenWeatherMap","slug":"openweathermap","url":"http://openweathermap.org/","crawl_rate":360},{"title":"Weather Underground","slug":"wunderground","url":"https://www.wunderground.com/?apiref=fc30dc3cd224e19b","crawl_rate":720},{"title":"World Weather Online","slug":"world-weather-online","url":"http://www.worldweatheronline.com/","crawl_rate":360}],"title":"London","location_type":"City","woeid":44418,"latt_long":"51.506321,-0.12714","timezone":"Europe/London"}';

      const dataString = require("./data");
      class Weather {
        constructor(data) {
          this.data = JSON.parse(dataString);
        }
        maxTemps() {
          return this.data.consolidated_weather.map((w) => w.max_temp);
        }
        averageTemp() {
          let totalTemp = this.data.consolidated_weather.reduce(function (
            total,
            value
          ) {
            return total + value.the_temp;
          },
          0);
          return (totalTemp / this.data.consolidated_weather.length).toFixed(2);
        }

        forcast(date) {
          for (let i in this.data.consolidated_weather) {
            // console.log("The temperature was " + i.the_temp.toFixed(2) + " degrees with a high of"  + i.max_temp.toFixed(2) + " and a low of" + i.min_temp.toFixed(2) );

            return date === i.applicable_date
              ? "The temperature was " +
                  i.the_temp.toFixed(2) +
                  " degrees with a high of" +
                  i.max_temp.toFixed(2) +
                  " and a low of" +
                  i.min_temp.toFixed(2) +
                  "."
              : "No information for that day";
          }
        }
      }
    </script>
  </body>
</html>
